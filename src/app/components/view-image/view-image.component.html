<div class="view-image-container">
  @if (product && productImages) {
    <div class="image-sidebar">
      @for (image of productImages; track image; let isFirst = $first) {
        <div class="sidebar-image-container" [ngClass]="{'active': isFirst}">
          <img (click)="changeImage($event)" [src]="imageUrl + image" [attr.data-image]="image" (error)="onImageError($event)">
        </div>
      }
    </div>
    <div class="main-image-container" (mousemove)="zoomImage($event)" (mouseleave)="resetZoom()">
      @if (product.discount && product.discount != null) {
        <div class="discount-banner">
          <p>{{ product.discount }}% OFF</p>
        </div>
      }
      <img (click)="openImage(primaryImage)" [src]="imageUrl + primaryImage" [style.transform]="'scale(' + zoomFactor + ') translate(' + zoomX + '%, ' + zoomY + '%)'" (error)="onImageError($event)">
    </div>
  }
</div>